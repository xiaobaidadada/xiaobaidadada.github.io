# 什么是分布式

其实任何有几个服务互相调用的项目都是分布式下项目，一个项目，需要另一个项目。举个不恰当的例子，你写的java项目需要调用腾讯云，阿里云的服务，这就是分布式项目。分布式不是一种技术，而是项目软件架构解决方案，没有特定的技术。

如果项目很大，需要分解成多个java服务器，这些服务有的可能是，登陆模块，订单模块，erp模块等。你需要，自己在java代码中调用别的模块的http接口，也可以使用tcp互相调用，不过这就太麻烦了，不是游戏、聊天这样实时性很高的项目没必要这样做。然后对外只能提供一个接口，你会想到用nginx做路径转发到不同的服务。最后流量高了，你还可能同时启动多个相同的服务，用nginx做负载均衡，保证用户使用体验达到高度可用（高可用）。这就是一个完善的分布式项目。

这样其实没有任何问题，只要代码够规范，接口调用什么的，写好一些通用的方法，就可以保证系统的稳定性。但是这样需要开发者有足够的水平，也不能保证一个团队每个人都能按要求写，所以一些公司开源了一些自己内部做的工具框架。spring当然不能放过这样一个可以做框架的机会，巩固自己的地位，spring整合了一些第三方的开源项目，或自己提供一些组件，提供基于spring boot的通用的针对分布式项目各个问题提供组件。

所以我们不学什么spring cloud也可以做分布式项目，但是这些技术目前足够成熟，能够节约开发时间。

# 分布式项目所面临的事情

为了把一个多个服务组成的项目变成一个整体，需要解决这些事情；

1. 请求路由转发到各个服务上，这个事情nginx就可以根据路径做转发，而且nginx还提供了负载均衡的功能。不过还是有一些java版本的服务比如spring getway，他是一个java服务项目，所以可以通过直接修改java代码做一些配置操作。选哪个都行，但是肯定选getway的多，大家都信任spring，你不用就会感觉low，就像一些安全框架一样，spring securit、shior我见过好几个公司都是只用他们做用户身份token的验证，然后权限什么的都是自己做aop，一个过滤器就完成的事，非要套这么多没用的就为了体验高级感。
2. 服务之间互相调用，本来用java的http工具调用就好了，不过现在有一些选择可以用，比如openfegin，dubbo。不过这些东西要搭配服务中心（zookeeper,eureka,nocas等）来做，这个肯定比直接使用http方便，也很需要这样的工具。
   1. 什么是服务中心，就是给java项目起个名字，不再使用ip+port来作为服务的标识。
   2. 还有一个配置中心，soringboot是基于配置的，这个配置中心就是为了你在配置中心写配置，项目启动的时候去加载。这个nocas支持，eureka不支持。一般这样的功能都会提供心跳，就是定时测试服务还能不能使用。
   3. openfegin啊，dubbo啊去访问服务中心上的服务，通过定义相同的函数名标识服务，然后框架去服务中心根据服务名得到服务的实际ip和port，去访问，访问完自动给其序列化成对象。前提是先利用这些框架的客户端把服务自己注册上去。openfegin只支持controll方法，dubbo支持所有方法。dubbo的灵活性就有点强了，不过阿里提供的嘛，不用不高级（开个玩笑）；

主要问题就这两个。把那几个框架看一下使用用法就好了，原理也很简单。

# springcloud

spring整合了目前市场上所有的开源的微服务技术，用springboot技术，整合了他们，提供统一的api，还对一些微服务技术添加了更便利的api支持，spring叫它spring cloud 项目，spring cloud项目有很多个版本，每一个版本包含的微服务技术也有一定的变化，就是说，一个sprincloud项目包含了许多个springboot的微服务小项目，其中把一些关键核心的小项目整合起来，比如alibaba 还有之前的nEtflix，所以学习springcloud整合的分布式技术，要先学会这个核心的子项目，它也包含了许多个子项目；
