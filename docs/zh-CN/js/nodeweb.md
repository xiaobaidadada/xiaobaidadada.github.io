# http模块

nodejs中的http模块是最基本的接受和处理web服务器的框架了，每个语言几乎都提供了http服务器包，java也提供了，但是java中普遍有一些比如tomcat这样的容器，自己实现解析http服务，并提供web编写环境与接口。



而nodejs的http模块功能相比就比较丰富，express这样的框架也只是对http模块封装。



http模块最大的特点是提供了一个next功能，前一个http函数处理完，可以交给下一个函数处理。



# Express

这个web框架的基本特点是：

1. 提供中间件，这和http的next还是有区别的，中间件发生在处理http函数之前，中间件之间的数据交互是上一个的req和res。
2. 提供模板引擎，和视图比如ejs，就像jsp，用于构建静态页面
3. 还支持websocket。
4. 支持cookie和session功能。
5. 各种路由和参数获取方式。



# Koa

这个web框架也是由express的作者提供的。

它的理念和Express就有很大不同，express 是路由，中间件，模板或者字符串返回结果一套，还有websocket都支持了。



设计上来说，它只支持两个功能，第一个是接受http请求，第二个是接受完请求挨个执行中间件，中间件的数据传递使用ctx，上下文，上下文包括了req和res。它的执行下一个中间件是需要使用next声明的，和http模块的一样，但是支持await 回调，这样就可以改变中间件执行的前后顺序，中间件的前后顺序默认是按使用use的顺序。



它本身连路由都不支持，需要使用路由中间件，加入什么中间件，我们的操作都需要使用中间件对象的api，然后注册中间件。



# Nest

这是一个支持ts特性的语法，提供 web风格的代码组织框架，类似java中的spring mvc 。



1. **这类框架肯定需要ioc依赖注入的功能，nest的依赖注入需要使用模块对象来声明**，通过模块对象之前的引用，最终将全局模块注册到开始。 模块分为提供者和控制器，具有不同的功能，提供者可以提供注入功能，在这个模块内没有声明的提供者是不能提供注入的，且默认对象是在一个模块中是单例的。
2. 支持，中间件（函数），全局异常过滤器（控制器或者提供者只要发生异常抛出这里会拦截），拦截器（可以阻止下一步继续执行，中间件也可以有这个效果吧）。
3. 守卫是个修饰器（注解，可以判断函数能不能执行）。一般不会用这个而是自己定义。
4. 支持websocket .io 以注解方式定义路由
5. 支持微服务，就是各种支持mq的中间件，比如mqtt,rabitmq ，redis,支持的队列，只要有提供订阅消费模式的，提供方法注解路由。



